

	<div class="wrapper">
		<nav id="sidebar" class="sidebar js-sidebar">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="index.html">
          <span class="align-middle">MICRON</span>
        </a>

				<ul class="sidebar-nav">
					<li class="sidebar-header">
						Pages
					</li>

					<li class="sidebar-item active">
						<a class="sidebar-link" href="/admin/dashboard-view">
              <i class="align-middle" data-feather="sliders"></i> <span class="align-middle">Dashboard</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/admin/product-view">
             <i class="align-middle" data-feather="shopping-cart"></i><span class="align-middle">Product</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/admin/category-view">
              <i class="align-middle" data-feather="grid"></i> <span class="align-middle">Category</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/admin/tags-view">
              <i class="align-middle" data-feather="tag"></i> <span class="align-middle">Tag</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/admin/sub-admin">
              <i class="align-middle" data-feather="user-plus"></i> <span class="align-middle">Sub-Admin</span>
            </a>
					</li>
          <li class="sidebar-item">
						<a class="sidebar-link" href="/admin/user-query">
              <i class="align-middle" data-feather="user-plus"></i> <span class="align-middle">User Query</span>
            </a>
					</li>
				</ul>
			</div>
		</nav>

		<div class="main">
			<nav class="navbar navbar-expand navbar-light navbar-bg">
				<a class="sidebar-toggle js-sidebar-toggle">
          <i class="hamburger align-self-center"></i>
        </a>

				<div class="navbar-collapse collapse">
					<ul class="navbar-nav navbar-align">
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle" href="#" id="alertsDropdown" data-bs-toggle="dropdown">
								
							</a>
							<div class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0" aria-labelledby="alertsDropdown">
								
								
							
							</div>
						</li>
						
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#" data-bs-toggle="dropdown">
                <i class="align-middle" data-feather="settings"></i>
              </a>

							<a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">
                <img src="/images/icons8-administrator-male-48.png" class="avatar img-fluid rounded me-1" alt="Charles Hall" /><b><span id="adminName" class="text-dark"></span></b>

              </a>
							<div class="dropdown-menu dropdown-menu-end">
								{{!-- <a class="dropdown-item" href="pages-profile.html"><i class="align-middle me-1" data-feather="user"></i> Profile</a> --}}
								<a class="dropdown-item" href="/admin/dashboard-view"><i class="align-middle me-1" data-feather="pie-chart"></i> Analytics</a>
								<a class="dropdown-item" href="#" id="logoutButton">
  <i class="align-middle me-1" data-feather="log-out"></i> Logout
</a>

							</div>
						</li>
					</ul>
				</div>
			</nav>

			<main class="content">
				<div class="container-fluid p-0">

					<h1 class="h3 mb-3"><strong>Analytics</strong> Dashboard</h1>

					<div class="row d-flex justify-content-between">
    <div class="col-xl-3 col-md-6 mb-4">
       <a href="/admin/product-view" style="text-decoration: none;">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col mt-0">
                        <h5 class="card-title">Products</h5>
                    </div>
                    <div class="col-auto">
                        <div class="stat text-primary">
<i class="align-middle" data-feather="shopping-cart"></i>
                        </div>
                    </div>
                </div>
                <h1 class="mt-1 mb-3">{{productCount}}</h1>
               
            </div>
        </div></a>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
       <a href="/admin/category-view" style="text-decoration: none;">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col mt-0">
                        <h5 class="card-title">Categories</h5>
                    </div>
                    <div class="col-auto">
                        <div class="stat text-primary">
<i class="align-middle" data-feather="grid"></i>
                        </div>
                    </div>
                </div>
                <h1 class="mt-1 mb-3">{{categoryCount}}</h1>
                
            </div>
        </div></a>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <a href="/admin/tags-view" style="text-decoration: none;">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col mt-0">
                        <h5 class="card-title">Tags</h5>
                    </div>
                    <div class="col-auto">
                        <div class="stat text-primary">
                            <i class="align-middle" data-feather="tag"></i>
                        </div>
                    </div>
                </div>
                <h1 class="mt-1 mb-3">{{tagCount}}</h1>
                
            </div>
        </div></a>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
 <a href="/admin/sub-admin" style="text-decoration: none;">       <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col mt-0">
                        <h5 class="card-title">Sub Admin</h5>
                    </div>
                    <div class="col-auto">
                        <div class="stat text-primary">
<i class="align-middle" data-feather="users"></i>
                        </div>
                    </div>
                </div>
                <h1 class="mt-1 mb-3">{{subAdminCount}}</h1>
                
            </div>
        </div></a>
    </div>
</div>


					<div class="row">
						<div class="row">
						<div class="col-12 col-lg-12 col-xxl-12 d-flex">
							<div class="card flex-fill">
								<div class="card-header">

									<h5 class="card-title mb-0">Latest Product</h5>
								</div>
								<table class="table table-hover my-0">
  <thead>
    <tr>
      <th>Product</th>
      <th class="d-none d-xl-table-cell">Added At</th>
      <th class="d-none d-xl-table-cell">Category</th>
      <th>Tag</th>
      <th class="d-none d-md-table-cell">Photo</th>
    </tr>
  </thead>
  <tbody>
    {{#each formattedProducts}}  <!-- Move this outside <tr> -->
    <tr style="cursor: pointer;">
      <td>{{p_name}}</td>
      <td class="d-none d-xl-table-cell">{{formattedDate}}</td>
      <td class="d-none d-xl-table-cell">{{p_category}}</td>
      <td><span class="badge bg-success">{{product_tag}}</span></td>
      <td class="d-none d-md-table-cell">
       <div class="table-img">
         <img src="{{product_image_url}}" class="" alt="{{p_name}}">
       </div>
      </td>
    </tr>
    {{/each}}  <!-- Close after <tr> -->
  </tbody>
</table>

							</div>
						</div>
						
					</div>
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-2 order-xxl-3">
							<div class="card flex-fill w-100">
								<div class="card-header">

									<h5 class="card-title mb-0">Browser Usage</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="py-3">
											<div class="chart chart-xs">
												<canvas id="chartjs-dashboard-pie"></canvas>
											</div>
										</div>

										<table class="table mb-0">
											<tbody>
												<tr>
													<td>Chrome</td>
													<td class="text-end">4306</td>
												</tr>
												<tr>
													<td>Firefox</td>
													<td class="text-end">3801</td>
												</tr>
												<tr>
													<td>IE</td>
													<td class="text-end">1689</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-12 col-xxl-6 d-flex order-3 order-xxl-2">
							<div class="card flex-fill w-100">
								<div class="card-header">

									<h5 class="card-title mb-0">Real-Time</h5>
								</div>
								<div class="card-body px-4">
									<div id="world_map" style="height:350px;"></div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-1">
							<div class="card flex-fill">
								<div class="card-header">

									<h5 class="card-title mb-0">Calendar</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="chart">
											<div id="datetimepicker-dashboard"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					

				</div>
			</main>

			

			{{!-- <footer class="footer">
				<div class="container-fluid">
					<div class="row text-muted">
						<div class="col-6 text-start">
							<p class="mb-0">
								<a class="text-muted" href="https://adminkit.io/" target="_blank"><strong>AdminKit</strong></a> &copy;
							</p>
						</div>
						<div class="col-6 text-end">
							<ul class="list-inline">
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Support</a>
								</li>
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Help Center</a>
								</li>
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Privacy</a>
								</li>
								<li class="list-inline-item">
									<a class="text-muted" href="https://adminkit.io/" target="_blank">Terms</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</footer> --}}
		</div>
	</div>


<script>
	document.addEventListener("DOMContentLoaded", () => {
  // Function to get cookie by name
  function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
  }

  // Check if admin is logged in by checking the "adminToken" cookie
  const adminToken = getCookie("adminToken");

  console.log("adminToken:", adminToken);  // Log adminToken to verify
  
  if (adminToken) {
    // If the admin is logged in, redirect to the dashboard
    window.location.href = "/admin/dashboard-view";
  }

  // Retrieve admin name from cookies
const adminName = decodeURIComponent(getCookie("adminName") || "");

  console.log("adminName:", adminName);  // Log adminName to verify

  // Set the admin name to the span with id "adminName" (if exists)
  if (adminName) {
document.getElementById('adminName').textContent = decodeURIComponent(adminName);
  } else {
    console.error("Admin Name not found in cookies.");
  }

  const logoutButton = document.getElementById('logoutButton');

  // Logout functionality with SweetAlert confirmation
  logoutButton.addEventListener("click", (event) => {
    event.preventDefault(); // Prevent default link behavior

    // Retrieve admin ID and name from cookies
    const adminId = getCookie("adminId");

    console.log("adminId:", adminId);  // Log adminId to verify

    // If admin ID and name are found, show SweetAlert
    if (adminId && adminName) {
      Swal.fire({
        title: `Are you sure, ${adminName}?`,
        text: `You will be logged out of your account!`,
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, logout!',
        cancelButtonText: 'Cancel',
      }).then((result) => {
        if (result.isConfirmed) {
          // Redirect to logout route after confirmation
          window.location.href = '/admin/logout'; // Or pass adminId if necessary
        }
      });
    } else {
      console.error("Admin ID or Admin Name not found in cookies.");
    }
  });
});

</script>


<!-- SweetAlert2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
